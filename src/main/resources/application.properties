# Fleet Navigator Configuration
# =============================

# Application
spring.application.name=fleet-navigator
server.port=2025
debug=true

# Version for cache invalidation (auto-incremented on build)
# Frontend checks this to detect when to clear browser cache
fleet-navigator.version=@project.version@
fleet-navigator.build-time=@timestamp@

# ===== Plattformspezifische Pfade =====
# Pfade werden automatisch basierend auf dem OS ermittelt:
#   Linux/macOS: ~/.java-fleet/
#   Windows:     %LOCALAPPDATA%\JavaFleet\
#
# Optional: Pfade überschreiben
# fleet-navigator.paths.base-dir=/custom/path
# fleet-navigator.paths.data-dir=/custom/data
# fleet-navigator.paths.models-dir=/custom/models
# fleet-navigator.paths.logs-dir=/custom/logs
#
# Environment Variables (haben Vorrang):
#   FLEET_NAVIGATOR_DATA_DIR=/custom/data

# H2 Database (Pfad wird von DataSourceConfiguration gesetzt)
# Die Datenbank liegt in: {data-dir}/fleetnavdb.mv.db
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# JPA/Hibernate
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# ===== LLM Provider Configuration =====
# Multi-Provider System: llama.cpp + Ollama
# Default provider (java-llama-cpp, llamacpp, or ollama)
# WICHTIG: 'java-llama-cpp' = JNI (embedded), 'llamacpp' = subprocess, 'ollama' = local Ollama server
llm.default-provider=java-llama-cpp

# llama.cpp Provider Configuration (JNI-based, embedded)
# Läuft direkt im Java-Prozess ohne separaten Server
llm.llamacpp.binary-path=./bin/llama-server-wrapper.sh
llm.llamacpp.port=2024
# models-dir wird automatisch ermittelt: ~/.java-fleet/models/ (Linux/macOS)
# llm.llamacpp.models-dir=/opt/fleet-navigator/models
llm.llamacpp.auto-start=true
llm.llamacpp.context-size=4096
llm.llamacpp.gpu-layers=999
llm.llamacpp.threads=8
llm.llamacpp.enabled=true

# Ollama Provider Configuration (Local Ollama Server)
llm.ollama.base-url=http://localhost:11434
llm.ollama.default-model=mistral:latest
llm.ollama.timeout-seconds=300
llm.ollama.enabled=true

# Smart Model Selection
# Automatically routes prompts to the best model based on task type
# Note: Configure these with actual GGUF model names from your models directory
fleet-navigator.model-selection.enabled=false
fleet-navigator.model-selection.code-model=
fleet-navigator.model-selection.fast-model=
fleet-navigator.model-selection.vision-model=

# Cache Configuration
# TTL in minutes for model response cache
fleet-navigator.cache.ttl-minutes=30
fleet-navigator.cache.max-size=500

# Logging
logging.level.root=INFO
logging.level.io.javafleet.fleetnavigator=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# Fine-grained logging control (set to DEBUG only when needed)
# WebSocket communication (stats, heartbeat, messages)
logging.level.io.javafleet.fleetnavigator.websocket=INFO

# Log Analysis (AI streaming, llama.cpp)
logging.level.io.javafleet.fleetnavigator.service.LogAnalysisService=DEBUG

# Java Llama CPP Provider (JNI)
logging.level.io.javafleet.fleetnavigator.llm.providers.JavaLlamaCppProvider=DEBUG

# Mate Management
logging.level.io.javafleet.fleetnavigator.service.FleetMateService=INFO

# Chat Service
logging.level.io.javafleet.fleetnavigator.service.ChatService=INFO

# Command Execution
logging.level.io.javafleet.fleetnavigator.service.CommandExecutionService=INFO

# DevTools
spring.devtools.restart.enabled=true

# ===== Auto-Update Konfiguration =====
# Automatische Updates von GitHub Releases
fleet-navigator.update.enabled=true
fleet-navigator.update.github-repo=FranzHerstellJavaFleet/Fleet-Navigator
fleet-navigator.update.check-interval-hours=6
fleet-navigator.update.check-interval-ms=21600000

# Session Configuration
# Session-Timeout: 60 Minuten (3600 Sekunden)
server.servlet.session.timeout=60m
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false

# File Upload Configuration
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.enabled=true
